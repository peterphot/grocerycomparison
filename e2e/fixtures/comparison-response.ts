import type { ComparisonResponse } from '@grocery/shared';

export const defaultResponse: ComparisonResponse = {
  storeTotals: [
    {
      store: 'woolworths',
      storeName: 'Woolworths',
      items: [
        {
          shoppingListItemId: 'item-1',
          shoppingListItemName: 'milk',
          quantity: 1,
          match: {
            store: 'woolworths',
            productName: 'Woolworths Full Cream Milk 2L',
            brand: 'Woolworths',
            price: 3.50,
            packageSize: '2L',
            unitPrice: 1.75,
            unitMeasure: 'L',
            unitPriceNormalised: 0.175,
            available: true,
          },
          lineTotal: 3.50,
        },
        {
          shoppingListItemId: 'item-2',
          shoppingListItemName: 'bread',
          quantity: 1,
          match: {
            store: 'woolworths',
            productName: 'Woolworths White Bread 700g',
            brand: 'Woolworths',
            price: 3.80,
            packageSize: '700g',
            unitPrice: 0.54,
            unitMeasure: '100g',
            unitPriceNormalised: 0.54,
            available: true,
          },
          lineTotal: 3.80,
        },
      ],
      total: 7.30,
      unavailableCount: 0,
      allItemsAvailable: true,
    },
    {
      store: 'coles',
      storeName: 'Coles',
      items: [
        {
          shoppingListItemId: 'item-1',
          shoppingListItemName: 'milk',
          quantity: 1,
          match: {
            store: 'coles',
            productName: 'Coles Full Cream Milk 2L',
            brand: 'Coles',
            price: 3.30,
            packageSize: '2L',
            unitPrice: 1.65,
            unitMeasure: 'L',
            unitPriceNormalised: 0.165,
            available: true,
          },
          lineTotal: 3.30,
        },
        {
          shoppingListItemId: 'item-2',
          shoppingListItemName: 'bread',
          quantity: 1,
          match: {
            store: 'coles',
            productName: 'Coles White Bread 700g',
            brand: 'Coles',
            price: 3.50,
            packageSize: '700g',
            unitPrice: 0.50,
            unitMeasure: '100g',
            unitPriceNormalised: 0.50,
            available: true,
          },
          lineTotal: 3.50,
        },
      ],
      total: 6.80,
      unavailableCount: 0,
      allItemsAvailable: true,
    },
    {
      store: 'aldi',
      storeName: 'Aldi',
      items: [
        {
          shoppingListItemId: 'item-1',
          shoppingListItemName: 'milk',
          quantity: 1,
          match: {
            store: 'aldi',
            productName: 'Farmdale Full Cream Milk 2L',
            brand: 'Farmdale',
            price: 2.69,
            packageSize: '2L',
            unitPrice: 1.35,
            unitMeasure: 'L',
            unitPriceNormalised: 0.135,
            available: true,
          },
          lineTotal: 2.69,
        },
        {
          shoppingListItemId: 'item-2',
          shoppingListItemName: 'bread',
          quantity: 1,
          match: null,
          lineTotal: 0,
        },
      ],
      total: 2.69,
      unavailableCount: 1,
      allItemsAvailable: false,
    },
    {
      store: 'harrisfarm',
      storeName: 'Harris Farm',
      items: [
        {
          shoppingListItemId: 'item-1',
          shoppingListItemName: 'milk',
          quantity: 1,
          match: {
            store: 'harrisfarm',
            productName: 'Harris Farm Full Cream Milk 2L',
            brand: 'Harris Farm',
            price: 4.20,
            packageSize: '2L',
            unitPrice: 2.10,
            unitMeasure: 'L',
            unitPriceNormalised: 0.21,
            available: true,
          },
          lineTotal: 4.20,
        },
        {
          shoppingListItemId: 'item-2',
          shoppingListItemName: 'bread',
          quantity: 1,
          match: {
            store: 'harrisfarm',
            productName: 'Harris Farm Sourdough 700g',
            brand: 'Harris Farm',
            price: 4.50,
            packageSize: '700g',
            unitPrice: 0.64,
            unitMeasure: '100g',
            unitPriceNormalised: 0.64,
            available: true,
          },
          lineTotal: 4.50,
        },
      ],
      total: 8.70,
      unavailableCount: 0,
      allItemsAvailable: true,
    },
  ],
  mixAndMatch: {
    items: [
      {
        shoppingListItemId: 'item-1',
        shoppingListItemName: 'milk',
        quantity: 1,
        cheapestMatch: {
          store: 'aldi',
          productName: 'Farmdale Full Cream Milk 2L',
          brand: 'Farmdale',
          price: 2.69,
          packageSize: '2L',
          unitPrice: 1.35,
          unitMeasure: 'L',
          unitPriceNormalised: 0.135,
          available: true,
        },
        lineTotal: 2.69,
      },
      {
        shoppingListItemId: 'item-2',
        shoppingListItemName: 'bread',
        quantity: 1,
        cheapestMatch: {
          store: 'coles',
          productName: 'Coles White Bread 700g',
          brand: 'Coles',
          price: 3.50,
          packageSize: '700g',
          unitPrice: 0.50,
          unitMeasure: '100g',
          unitPriceNormalised: 0.50,
          available: true,
        },
        lineTotal: 3.50,
      },
    ],
    total: 6.19,
  },
  searchResults: [],
};

/**
 * Build a response reflecting a quantity multiplier for Journey 9.
 * Returns a response where "milk" has quantity 3, and lineTotal = price * 3.
 */
export function buildQuantityResponse(quantity: number): ComparisonResponse {
  const price = 3.50;
  const lineTotal = price * quantity;
  return {
    storeTotals: [
      {
        store: 'woolworths',
        storeName: 'Woolworths',
        items: [
          {
            shoppingListItemId: 'item-1',
            shoppingListItemName: 'milk',
            quantity,
            match: {
              store: 'woolworths',
              productName: 'Woolworths Full Cream Milk 2L',
              brand: 'Woolworths',
              price,
              packageSize: '2L',
              unitPrice: 1.75,
              unitMeasure: 'L',
              unitPriceNormalised: 0.175,
              available: true,
            },
            lineTotal,
          },
        ],
        total: lineTotal,
        unavailableCount: 0,
        allItemsAvailable: true,
      },
      {
        store: 'coles',
        storeName: 'Coles',
        items: [
          {
            shoppingListItemId: 'item-1',
            shoppingListItemName: 'milk',
            quantity,
            match: {
              store: 'coles',
              productName: 'Coles Full Cream Milk 2L',
              brand: 'Coles',
              price: 3.30,
              packageSize: '2L',
              unitPrice: 1.65,
              unitMeasure: 'L',
              unitPriceNormalised: 0.165,
              available: true,
            },
            lineTotal: 3.30 * quantity,
          },
        ],
        total: 3.30 * quantity,
        unavailableCount: 0,
        allItemsAvailable: true,
      },
      {
        store: 'aldi',
        storeName: 'Aldi',
        items: [
          {
            shoppingListItemId: 'item-1',
            shoppingListItemName: 'milk',
            quantity,
            match: {
              store: 'aldi',
              productName: 'Farmdale Full Cream Milk 2L',
              brand: 'Farmdale',
              price: 2.69,
              packageSize: '2L',
              unitPrice: 1.35,
              unitMeasure: 'L',
              unitPriceNormalised: 0.135,
              available: true,
            },
            lineTotal: 2.69 * quantity,
          },
        ],
        total: 2.69 * quantity,
        unavailableCount: 0,
        allItemsAvailable: true,
      },
      {
        store: 'harrisfarm',
        storeName: 'Harris Farm',
        items: [
          {
            shoppingListItemId: 'item-1',
            shoppingListItemName: 'milk',
            quantity,
            match: {
              store: 'harrisfarm',
              productName: 'Harris Farm Full Cream Milk 2L',
              brand: 'Harris Farm',
              price: 4.20,
              packageSize: '2L',
              unitPrice: 2.10,
              unitMeasure: 'L',
              unitPriceNormalised: 0.21,
              available: true,
            },
            lineTotal: 4.20 * quantity,
          },
        ],
        total: 4.20 * quantity,
        unavailableCount: 0,
        allItemsAvailable: true,
      },
    ],
    mixAndMatch: {
      items: [
        {
          shoppingListItemId: 'item-1',
          shoppingListItemName: 'milk',
          quantity,
          cheapestMatch: {
            store: 'aldi',
            productName: 'Farmdale Full Cream Milk 2L',
            brand: 'Farmdale',
            price: 2.69,
            packageSize: '2L',
            unitPrice: 1.35,
            unitMeasure: 'L',
            unitPriceNormalised: 0.135,
            available: true,
          },
          lineTotal: 2.69 * quantity,
        },
      ],
      total: 2.69 * quantity,
    },
    searchResults: [],
  };
}
